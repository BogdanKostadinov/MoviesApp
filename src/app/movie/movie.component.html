<app-seach-bar
  (searchValueChange)="onSearchValueChange($event)"
></app-seach-bar>

<app-category
  (applyChipsEvent)="onApplyChips($event)"
  (deleteChipEvent)="clearDeletedCategory($event)"
></app-category>

<div class="movies-container">
  <div *ngFor="let movie of filteredMovies" class="movie-card">
    <mat-card>
      <mat-card-header>
        <mat-card-title-group>
          <mat-card-title>{{ movie.title }}</mat-card-title>
          <mat-card-subtitle>{{ movie.releaseYear }}</mat-card-subtitle>
        </mat-card-title-group>
        <button mat-icon-button [matMenuTriggerFor]="menu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button
            mat-menu-item
            (click)="openDialog({ action: 'edit', movie: movie })"
          >
            <mat-icon>edit</mat-icon>
            <span>Edit</span>
          </button>
          <button mat-menu-item (click)="deleteMovieRequest(movie)">
            <mat-icon>delete</mat-icon>
            <span>Delete</span>
          </button>
        </mat-menu>
      </mat-card-header>
      <mat-card-content class="movie-card-content">
        <p>{{ getCategoryNames(movie) }}</p>
        <p>{{ movie.director }}</p>
      </mat-card-content>
    </mat-card>
  </div>
</div>
